(()=>{"use strict";var t={69:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randomFillSync=void 0,e.randomFillSync=void 0},590:(t,e,n)=>{e.PX=e.cH=void 0;const r=n(69);e.cH=()=>o().map((t=>("0000000"+t.toString(32).toUpperCase()).slice(-8))).join(""),e.PX=()=>o().map((t=>("000000000"+t.toString(16)).slice(-10))).join("");const o=()=>{const t=(()=>{const[t,e]=i(),n=new Uint8Array(6);for(let e=0,r=t;e<6;e++,r=Math.trunc(r/256))n[5-e]=r%256;return Uint8Array.of(...n,e>>8,255&e,...c(12))})(),e=[0,0,0,0];for(let n=0;n<20;n++)e[Math.trunc(n/5)]+=t[n]*Math.pow(256,4-n%5);return e};let s=0,a=0;const i=()=>{let t=Date.now();if(t<=s){if(++a<65536)return[s,a];let e=0;for(;t<=s;)if(t=Date.now(),++e>1e6){console.warn("scru160: reinitialized internal state as clock did not go forward; monotonicity may be broken");break}}const[e,n]=c(2);return s=t,a=(127&e)<<8|n,[s,a]},c="undefined"!=typeof window&&window.crypto?t=>window.crypto.getRandomValues(new Uint8Array(t)):r.randomFillSync?t=>(0,r.randomFillSync)(new Uint8Array(t)):(console.warn("scru160: fell back on Math.random() as no cryptographic RNG was detected"),t=>{const e=new Uint8Array(t);for(let n=0;n<t;n++)e[n]=Math.trunc(256*Math.random());return e})}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(590);const e=(t,e="")=>{if(!t)throw new Error("Assertion failed"+(e?": "+e:""))};describe("scru160()",(function(){const n=[];for(let e=0;e<1e5;e++)n[e]=(0,t.cH)();it("generates 32-character base32hexupper string",(function(){n.forEach((t=>e("string"==typeof t)));const t=/^[0-9A-V]{32}$/;e(n.every((e=>t.test(e))))})),it("generates 100k identifiers without collision",(function(){e(new Set(n).size===n.length)})),it("generates sortable string representation by creation time",(function(){const t=n.slice().sort();for(let r=0;r<n.length;r++)e(n[r]===t[r])})),it("encodes up-to-date unix timestamp",(function(){const n=/^([0-9A-V]{9})([0-9A-V])/;for(let r=0;r<1e4;r++){const r=Date.now(),o=n.exec((0,t.cH)()),s=8*parseInt(o[1],32)+(parseInt(o[2],32)>>2);e(Math.abs(r-s)<16)}})),it("encodes sortable timestamp and counter",(function(){const t=/^([0-9A-V]{9})([0-9A-V])([0-9A-V]{3})/,r=t.exec(n[0]);let o=8*parseInt(r[1],32)+(parseInt(r[2],32)>>2),s=65535&(parseInt(r[2],32)<<14|parseInt(r[3],32)>>1);for(let r=1;r<n.length;r++){const a=t.exec(n[r]),i=8*parseInt(a[1],32)+(parseInt(a[2],32)>>2),c=65535&(parseInt(a[2],32)<<14|parseInt(a[3],32)>>1);e(o<i||o===i&&s<c),o=i,s=c}})),it("sets random bits randomly (this may fail at 0.001% probability)",(function(){const t=new Array(160).fill(0);for(const e of n)for(let n=0;n<8;n++){const r=parseInt(e.substring(4*n,4*n+4),32);for(let e=0;e<20;e++)r&524288>>>e&&t[20*n+e]++}const r=n.length,o=4.417173*Math.sqrt(.25/r);for(let n=64;n<t.length;n++){const s=t[n]/r;e(Math.abs(s-.5)<o,`random bit ${n}: ${s}`)}}))}))})(),(()=>{var t=n(590);const e=(t,e="")=>{if(!t)throw new Error("Assertion failed"+(e?": "+e:""))};describe("scru160f()",(function(){const n=[];for(let e=0;e<1e5;e++)n[e]=(0,t.PX)();it("generates 40-character hexadecimal string",(function(){n.forEach((t=>e("string"==typeof t)));const t=/^[0-9a-f]{40}$/;e(n.every((e=>t.test(e))))})),it("generates 100k identifiers without collision",(function(){e(new Set(n).size===n.length)})),it("generates sortable string representation by creation time",(function(){const t=n.slice().sort();for(let r=0;r<n.length;r++)e(n[r]===t[r])})),it("encodes up-to-date unix timestamp",(function(){const n=/^[0-9a-f]{12}/;for(let r=0;r<1e4;r++){const r=Date.now(),o=n.exec((0,t.PX)()),s=parseInt(o[0],16);e(Math.abs(r-s)<16)}})),it("encodes sortable timestamp and counter",(function(){const t=/^([0-9a-f]{12})([0-9a-f]{4})/,r=t.exec(n[0]);let o=parseInt(r[1],16),s=parseInt(r[2],16);for(let r=1;r<n.length;r++){const a=t.exec(n[r]),i=parseInt(a[1],16),c=parseInt(a[2],16);e(o<i||o===i&&s<c),o=i,s=c}})),it("sets random bits randomly (this may fail at 0.001% probability)",(function(){const t=new Array(160).fill(0);for(const e of n)for(let n=0;n<10;n++){const r=parseInt(e.substring(4*n,4*n+4),16);for(let e=0;e<16;e++)r&32768>>>e&&t[16*n+e]++}const r=n.length,o=4.417173*Math.sqrt(.25/r);for(let n=64;n<t.length;n++){const s=t[n]/r;e(Math.abs(s-.5)<o,`random bit ${n}: ${s}`)}}))}))})()})();